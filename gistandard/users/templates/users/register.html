{% extends 'base.html' %}
{% block title %}注册{% endblock %}
{% block content %}
<form method="post" class="card p-4 mx-auto" style="max-width:500px;">
  <h3 class="mb-3">员工注册</h3>
  {% csrf_token %}

  <!-- 显示消息 -->
  {% if messages %}
    <div class="mb-3">
      {% for message in messages %}
        <div class="alert alert-{% if message.tags == 'error' %}danger{% else %}{{ message.tags }}{% endif %}
                    alert-dismissible fade show" role="alert">
          {{ message }}
          <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
      {% endfor %}
    </div>
  {% endif %}

  <div class="row">
    <div class="col-md-6 mb-3">
      <label class="form-label">工号 *</label>
      <input type="text" class="form-control" name="username" required>
    </div>
    <div class="col-md-6 mb-3">
      <label class="form-label">姓名 *</label>
      <input type="text" class="form-control" name="name" required>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6 mb-3">
      <label class="form-label">密码 *</label>
      <input type="password" class="form-control" name="password" required>
    </div>
    <div class="col-md-6 mb-3">
      <label class="form-label">确认密码 *</label>
      <input type="password" class="form-control" name="password2" required>
    </div>
  </div>
  <div class="mb-3">
    <label class="form-label">部门</label>
    <input type="text" class="form-control" name="department">
  </div>
  <div class="mb-3">
    <label class="form-label">手机号</label>
    <input type="text" class="form-control" name="phone" maxlength="11">
  </div>
  <button class="btn btn-success w-100 mb-2">提交注册</button>
  <div class="text-center">
    <!-- 关键修改：使用 users:login 而不是 login -->
    <small>已有账号？<a href="{% url 'users:login' %}">立即登录</a></small>
  </div>
</form>
{% endblock %}